{% extends "med/base.html" %} {% block title %}Patients{% endblock %} {% block
navbar_links %}
<li class="nav-item">
  <a
    class="btn btn-outline-primary me-2"
    href="{{ url_for('home.index') }}"
    role="button"
    >Homepage</a
  >
</li>
<li class="nav-item">
  <a
    class="btn btn-outline-primary me-2"
    href="{{ url_for('home.myo') }}"
    role="button"
    >Downloads</a
  >
</li>
<li class="nav-item">
  <a
    class="btn btn-outline-primary me-2"
    href="{{ url_for('med.index') }}"
    role="button"
    >Dashboard</a
  >
</li>
{% endblock %} {% block navbar_span %}
<a class="btn btn-danger ms-2" href="{{ url_for('home.logout') }}" role="button"
  >Log out</a
>{% endblock %} {% block content %}

<div
  class="container d-flex justify-content-center my-4 p-0"
  style="max-width: 720px"
>
  <ul class="nav nav-pills nav-justified w-100">
    <li class="nav-item">
      <a class="btn btn-secondary w-75" href="{{ url_for('med.patients') }}"
        >Patients</a
      >
    </li>
    <li class="nav-item">
      <a
        class="btn btn-outline-primary w-75"
        href="{{ url_for('med.routines') }}"
        >Routines</a
      >
    </li>
    <li class="nav-item">
      <a class="btn btn-outline-primary w-75" href="{{ url_for('med.create') }}"
        >New routine</a
      >
    </li>
  </ul>
</div>

<div class="row mx-auto" style="max-width: 720px">
  <div class="col p-0" style="height: 526px">
    <table class="table table-striped border border-3 align-middle text-center">
      <thead>
        <tr>
          <!-- <th scope="col">#</th> -->
          <th scope="col">Username</th>
          <th scope="col">Days Played</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for p in patients.items %}
        <tr>
          <!-- <th scope="row">{{ 10*(patients.page-1)+loop.index }}</th> -->
          <td>{{ p.username }}</td>
          <td>{{ p.days_done }} / {{ tot_days[loop.index-1] }}</td>
          <td>
            <a
              class="btn btn-primary btn-sm"
              href="{{ url_for('med.patients') }}/{{ p.username }}"
              role="button"
              >More info</a
            >
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% if patients.pages|int > 1 %}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center my-3">
      {% for page in patients.iter_pages() %} {% if page %} {% if page !=
      patients.page %}
      <li class="page-item">
        <a class="page-link" href="{{ url_for('med.patients') }}?page={{page}}"
          >{{ page }}</a
        >
      </li>
      {% else %}
      <li class="page-item active" aria-current="page">
        <a class="page-link">{{ page }}</a>
      </li>
      {% endif %} {% endif %} {% endfor %}
    </ul>
  </nav>
  {% endif %}
</div>

{% endblock %}
